var docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,o,n,t,c,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(n)switch(n.constructor){case Number:a=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+a+(c?"; domain="+c:"")+(t?"; path="+t:"")+(i?"; secure":""),!0},removeItem:function(e,o,n){return e&&this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(o?"; path="+o:""),!0):!1},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),o=0;o<e.length;o++)e[o]=decodeURIComponent(e[o]);return e}},LEAD=function(){function e(e,o,n){var t=new Array;null==o&&(o=document),null==n&&(n="*");var c=o.getElementsByTagName(n),a=c.length,r=new RegExp("(^|\\s)"+e+"(\\s|$)");for(i=0,j=0;i<a;i++)r.test(c[i].className)&&(t[j]=c[i],j++);return t}function o(){window.console.log("getQS");for(var e,o={},n=/\+/g,t=/([^&=]+)=?([^&]*)/g,c=function(e){return decodeURIComponent(e.replace(n," "))},i=window.location.search.substring(1);e=t.exec(i);)o[c(e[1])]=c(e[2]);return o}function n(e){window.console.log("refIsInList",e);for(var o=0,n=document.referrer,t=!1;o<e.length;o++){var c=new RegExp("^https?://([^/]+.)?"+e[o]+"(/|$)","i");if(n.match(c))return t=!0;t=!1}return t}function t(e,o){window.console.log("checkQSforTracking",e,o);var n=!1;return n=o?"undefined"!=typeof e[s.og.cmp]&&"undefined"!=typeof e[s.og.src]:"undefined"!=typeof e[s.campaign.medium]&&"undefined"!=typeof e[s.campaign.source]&&"undefined"!=typeof e[s.campaign.name]}function c(e,o){window.console.log("createTrackingObj",e,o);var n={};return n[s.campaign.medium]=o?e[s.og.src]:e[s.campaign.medium],n[s.campaign.source]=o?e[s.og.code]:e[s.campaign.source],n[s.campaign.name]=o?e[s.og.cmp]:e[s.campaign.name],n[s.campaign.content]="undefined"!=typeof e[s.campaign.content]?e[s.campaign.content]:"",n[s.custom.id]="undefined"!=typeof e[s.custom.id]?e[s.custom.id]:"",n[s.custom.strategy]="undefined"!=typeof e[s.custom.strategy]?e[s.custom.strategy]:"",n}function a(e){window.console.log("createCookie",e);try{var o='[{"'+s.campaign.medium+'":"'+e[s.campaign.medium]+'","'+s.campaign.source+'":"'+e[s.campaign.source]+'","'+s.campaign.name+'":"'+e[s.campaign.name]+'","'+s.campaign.content+'":"'+e[s.campaign.content]+'","'+s.custom.id+'":"'+e[s.custom.id]+'","'+s.custom.strategy+'":"'+e[s.custom.strategy]+'"}]',n=s.expireLength[e[s.campaign.medium]];docCookies.setItem(s.cookieName,o,n,"/",s.cookieDomain)}catch(t){return window.console.error("error trying to set cookie: ",t),t}return!0}function r(e){window.console.log("normalizeCookie",e);var o={},n=JSON.parse(e),t=n[0],i="undefined"!=typeof t[s.og.cmp]?!0:!1;return o=i?c(n[0],i):t}var m={},s={cookieName:"eis",campaign:{medium:"utm_medium",source:"utm_source",name:"utm_campaign",content:"utm_content"},custom:{id:"eis_id",strategy:"eis_strategy"},og:{src:"eis-src",code:"eis-code",cmp:"eis-cmp"},cmpID:"eis-cmp",campaignID:"eis-cmpid",leadSrc:"eis-src",channelType:"eis-type",tacticCode:"eis-code",mediumType:"eis-medium",defaultCmpid:"eiswebsite",EISDomains:["ebsco.com","ebscohost.com","epnet.com"],EISLandingPg:"www.ebsco.com/promo/",expireLength:{search:86400,landingpage:1209600,direct:86400,email:604800,social:86400,facebook:86400,twitter:86400,pinterest:86400,googleplus:86400,linkedin:86400,youtube:86400,vimeo:86400,bb:1209600,ppc:86400},cookieDomain:"ebsco.com",searchSites:["www.google.com","www.google.co.uk","www.google.co.in","www.google.com.ph","www.google.de","www.google.fr","bing.com","yahoo.com","gigablast.com","lycos.com","duckduckgo.com","ask.com","baidu.com","so.com"],socialSites:["t.co","twitter.com","facebook.com","pinterest.com","plus.url.google.com","linkedin.com","youtube.com","vimeo.com"],privacyPolicy:"We have a privacy policy. Please see https://www.ebsco.com/company/privacy-policy"};return m.deleteCookie=function(){try{return docCookies.removeItem(s.cookieName,"/",s.cookieDomain),window.console.log("deleting cookie"),!0}catch(e){return window.console.error("deleteCookie: ",e),!1}},m.detectCampaign=function(){window.console.log("detectCampaign");var o="undefined"!=typeof document.getElementsByClassName?document.getElementsByClassName("fnDetectCookie"):e("fnDetectCookie"),n=o.length,t="1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack;if(!(n>0))return window.console.log("no form detected"),!1;if(null!==docCookies.getItem(s.cookieName)&&EIS.loadOnce("JSON",function(){for(var e=docCookies.getItem(s.cookieName),t=r(e),c=void 0!==typeof t[s.campaign.medium]?t[s.campaign.medium]:"not set",i=void 0!==typeof t[s.campaign.source]?t[s.campaign.source]:"not set",a=void 0!==typeof t[s.campaign.name]?t[s.campaign.name]:"not set",m=void 0!==typeof t[s.campaign.content]?t[s.campaign.content]:"not set",d=void 0!==typeof t[s.custom.id]?t[s.custom.id]:"not set",u=void 0!==typeof t[s.custom.strategy]?t[s.custom.strategy]:"not set",l=null!==document.getElementById("fakeForm"),p=l?"text":"hidden",g=function(e,o,n){var t=document.createElement("input");return t.setAttribute("type",e),t.setAttribute("name",o),t.setAttribute("value",n),l&&(t.className="fnAddLabel",t.setAttribute("readonly","readonly")),t},w=g(p,s.campaign.medium,c),f=g(p,s.campaign.source,i),k=g(p,s.campaign.name,a),y=g(p,s.campaign.content,m),h=g(p,s.custom.id,d),v=g(p,s.custom.strategy,u),b=0;n>b;b++){var C=l?document.getElementById("hiddenVals"):o[b];window.console.log("targetElem: ",C),C.appendChild(w),C.appendChild(f),C.appendChild(k),C.appendChild(y),C.appendChild(h),C.appendChild(v)}return l&&(window.console.log("isTesting"),addNames=function(){try{for(var e=document.querySelectorAll("input.fnAddLabel"),o=e.length,n=0;o>n;n++)thisLabel="<label>"+e[n].getAttribute("name")+"</label>",e[n].insertAdjacentHTML("beforebegin",thisLabel),window.console.log("thisLabel: ",thisLabel,e[n]);return!0}catch(t){return window.console.error(t),!1}}()),!0}),t){var c=document.createElement("input");for(c.setAttribute("type","hidden"),c.setAttribute("name","dev_note"),c.setAttribute("value","DNT"),i=0;i<n;i++)o[i].appendChild(c);return!0}return!1},m.init=function(){window.console.log("LEAD.init");var e;EIS.loadOnce("JSON",function(){var e=!n(s.EISDomains);if(e){window.console.log("not ebsco domain referrer");var i=o(),m="undefined"!=typeof i[s.og.cmp]?!0:!1,d=t(i,m),u=null===docCookies.getItem(s.cookieName)?!1:!0;if(qsTracker={},d)if(window.console.info(s.privacyPolicy),qsTracker=c(i,m),u){var l=docCookies.getItem(s.cookieName),p=r(l);window.console.log("currCookie: ",l),window.console.log("cookieObj: ",p),window.console.log("qsTracker: ",qsTracker);var g=p[s.campaign.medium].toLowerCase(),w=qsTracker[s.campaign.medium].toLowerCase();switch(g){case"search":"search"===w&&a(qsTracker);break;case"landingpage":"landingpage"!==w||a(qsTracker);break;default:a(qsTracker)}}else a(qsTracker);else if(window.console.log("no qs detected"),n(s.searchSites)){var f=document.referrer,k=f.split("//")[1],y=k.split("/")[0],h={};h.cmpMedium="search",h.cmpSource=y,h.cmpName=window.location.host+"/"+window.location.pathname,a(h)}else if(n(s.socialSites)&&null===docCookies.getItem(s.cookieName)){var f=document.referrer,k=f.split("//")[1],y=k.split("/")[0],v={};v.cmpMedium="social",v.cmpSource=y,v.cmpName=window.location.host+"/"+window.location.pathname,a(v)}}}),e=m.detectCampaign()}(),m}();